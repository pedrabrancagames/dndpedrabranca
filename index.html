<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="RPG tÃ¡tico em Realidade Aumentada - Explore seu bairro e combata inimigos em AR">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">

  <title>D&D Pedra Branca</title>
</head>

<body>
  <!-- Container Principal -->
  <div id="app">
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen active">
      <div class="splash-content">
        <h1 class="game-title">D&D Pedra Branca</h1>
        <p class="game-subtitle">D&D Pedra Branca</p>
        <div class="loading-container">
          <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
          </div>
          <p class="loading-text" id="loading-text">Carregando...</p>
        </div>
      </div>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
      <header class="home-header">
        <h1>D&D Pedra Branca</h1>
      </header>
      <nav class="home-menu">
        <button class="menu-btn" id="btn-combat">
          <span class="btn-icon">âš”ï¸</span>
          <span class="btn-label">Combate & ExploraÃ§Ã£o</span>
        </button>
        <button class="menu-btn" id="btn-gm">
          <span class="btn-icon">ğŸ­</span>
          <span class="btn-label">Game Master</span>
        </button>
        <button class="menu-btn" id="btn-heroes">
          <span class="btn-icon">ğŸ‘¥</span>
          <span class="btn-label">HerÃ³is</span>
        </button>
        <button class="menu-btn" id="btn-inventory">
          <span class="btn-icon">ğŸ’</span>
          <span class="btn-label">InventÃ¡rio</span>
        </button>
        <button class="menu-btn" id="btn-config">
          <span class="btn-icon">âš™ï¸</span>
          <span class="btn-label">ConfiguraÃ§Ãµes</span>
        </button>
      </nav>
    </div>

    <!-- Map Screen -->
    <div id="map-screen" class="screen">
      <div id="map-container"></div>
      <button class="back-btn" id="btn-map-back">â† Voltar</button>
    </div>

    <!-- Heroes Screen -->
    <div id="heroes-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-heroes-back">â†</button>
        <h2>HerÃ³is</h2>
        <div class="resources-display">
          <span class="gold-display" id="heroes-gold">ğŸ’° 0</span>
          <span class="fragments-display" id="heroes-fragments">ğŸ’ 0</span>
        </div>
      </header>

      <!-- Grid de herÃ³is -->
      <div class="heroes-grid" id="heroes-grid"></div>

      <!-- Modal de detalhes do herÃ³i -->
      <div class="hero-detail-modal hidden" id="hero-detail-modal">
        <div class="hero-detail-content">
          <button class="modal-close" id="btn-close-hero-modal">âœ•</button>

          <!-- Header do herÃ³i -->
          <div class="hero-detail-header">
            <div class="hero-portrait-large" id="hero-portrait-large"></div>
            <div class="hero-detail-info">
              <h3 id="hero-detail-name"></h3>
              <span class="hero-detail-class" id="hero-detail-class"></span>
              <div class="hero-detail-level" id="hero-detail-level">NÃ­vel 1</div>
            </div>
          </div>

          <!-- Barra de XP -->
          <div class="xp-bar-container">
            <div class="xp-bar">
              <div class="xp-fill" id="xp-fill"></div>
            </div>
            <span class="xp-text" id="xp-text">0 / 100 XP</span>
          </div>

          <!-- Stats do herÃ³i -->
          <div class="hero-stats-grid" id="hero-stats-grid"></div>

          <!-- Deck de cartas -->
          <div class="deck-section">
            <h4 class="deck-title">ğŸ“œ Deck de Cartas</h4>
            <div class="deck-grid" id="deck-grid"></div>
          </div>
        </div>
      </div>

      <!-- Modal de upgrade de carta -->
      <div class="card-upgrade-modal hidden" id="card-upgrade-modal">
        <div class="card-upgrade-content">
          <button class="modal-close" id="btn-close-upgrade-modal">âœ•</button>
          <h4 class="upgrade-title">â¬†ï¸ Upgrade de Carta</h4>

          <div class="upgrade-comparison">
            <div class="upgrade-card current">
              <span class="upgrade-card-icon" id="upgrade-card-icon"></span>
              <span class="upgrade-card-name" id="upgrade-card-name"></span>
              <span class="upgrade-card-level" id="upgrade-card-level">NÃ­vel 1</span>
              <div class="upgrade-card-stats" id="upgrade-current-stats"></div>
            </div>
            <div class="upgrade-arrow">â¡ï¸</div>
            <div class="upgrade-card next">
              <span class="upgrade-card-icon" id="upgrade-next-icon"></span>
              <span class="upgrade-card-name" id="upgrade-next-name"></span>
              <span class="upgrade-card-level" id="upgrade-next-level">NÃ­vel 2</span>
              <div class="upgrade-card-stats" id="upgrade-next-stats"></div>
            </div>
          </div>

          <div class="upgrade-cost" id="upgrade-cost">
            <span>ğŸ’° 500</span>
            <span>ğŸ’ 10</span>
          </div>

          <button class="upgrade-btn" id="btn-confirm-upgrade">â¬†ï¸ Melhorar Carta</button>
        </div>
      </div>
    </div>

    <!-- Inventory Screen -->
    <div id="inventory-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-inventory-back">â†</button>
        <h2>InventÃ¡rio</h2>
        <div class="gold-display" id="gold-display">ğŸ’° 0</div>
      </header>

      <!-- Filtros de categoria -->
      <div class="inventory-filters" id="inventory-filters">
        <button class="filter-tab active" data-filter="all">Todos</button>
        <button class="filter-tab" data-filter="weapon">âš”ï¸ Armas</button>
        <button class="filter-tab" data-filter="armor">ğŸ›¡ï¸ Armaduras</button>
        <button class="filter-tab" data-filter="consumable">ğŸ§ª ConsumÃ­veis</button>
        <button class="filter-tab" data-filter="quest">ğŸ“œ Quest</button>
      </div>

      <!-- Indicador de capacidade -->
      <div class="inventory-capacity" id="inventory-capacity">
        <span class="capacity-label">Mochila:</span>
        <div class="capacity-bar">
          <div class="capacity-fill" id="capacity-fill"></div>
        </div>
        <span class="capacity-text" id="capacity-text">0/20</span>
      </div>

      <!-- Grid de itens -->
      <div class="inventory-grid" id="inventory-grid"></div>

      <!-- Modal de detalhes do item -->
      <div class="item-detail-modal hidden" id="item-detail-modal">
        <div class="item-detail-content">
          <button class="modal-close" id="btn-close-item-modal">âœ•</button>
          <div class="item-detail-header">
            <span class="item-detail-icon" id="item-detail-icon"></span>
            <div class="item-detail-title">
              <h3 id="item-detail-name"></h3>
              <span class="item-detail-rarity" id="item-detail-rarity"></span>
            </div>
          </div>
          <p class="item-detail-description" id="item-detail-description"></p>
          <div class="item-detail-stats" id="item-detail-stats"></div>
          <div class="item-detail-actions">
            <button class="action-btn equip-btn" id="btn-equip-item">ğŸ¯ Equipar</button>
            <button class="action-btn use-btn" id="btn-use-item">âœ¨ Usar</button>
            <button class="action-btn discard-btn" id="btn-discard-item">ğŸ—‘ï¸ Descartar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Config Screen -->
    <div id="config-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-config-back">â†</button>
        <h2>ConfiguraÃ§Ãµes</h2>
      </header>
      <div class="config-options">
        <label class="config-toggle">
          <span>Modo Teste (sem GPS)</span>
          <input type="checkbox" id="toggle-test-mode">
        </label>
        <label class="config-toggle">
          <span>Efeitos Sonoros</span>
          <input type="checkbox" id="toggle-sound" checked>
        </label>
      </div>
    </div>

    <!-- Game Master Screen -->
    <div id="gm-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-gm-back">â†</button>
        <h2>Game Master</h2>
      </header>
      <div class="gm-panel" id="gm-panel">
        <div class="gm-avatar">ğŸ­</div>
        <div class="gm-text" id="gm-text"></div>
        <div class="gm-actions" id="gm-actions"></div>
      </div>
    </div>

    <!-- Combat HUD (DOM Overlay para AR) -->
    <div id="combat-hud" class="screen">
      <!-- Menu superior -->
      <div class="combat-top-bar">
        <button class="hud-btn" id="btn-pause">â‰¡</button>
        <div class="turn-indicator" id="turn-indicator">Turno: Guerreiro</div>
        <button class="hud-btn" id="btn-exit-combat">âœ•</button>
      </div>

      <!-- Painel de herÃ³is (esquerda) -->
      <div class="hero-panel" id="hero-panel"></div>

      <!-- Indicador de PA -->
      <div class="pa-indicator" id="pa-indicator">
        <span class="pa-label">PA:</span>
        <span class="pa-dots" id="pa-dots">â—â—â—</span>
      </div>

      <!-- Carrossel de cartas (inferior) -->
      <div class="card-carousel" id="card-carousel"></div>

      <!-- BotÃ£o de passar turno -->
      <button class="pass-turn-btn" id="btn-pass-turn">Passar Turno</button>

      <!-- Reticle indicator -->
      <div class="reticle-hint" id="reticle-hint">Aponte para uma superfÃ­cie plana</div>

      <!-- Pause Menu -->
      <div class="pause-menu hidden" id="pause-menu">
        <h3>â¸ï¸ Pausado</h3>
        <button class="pause-btn" id="btn-resume">â–¶ï¸ Continuar</button>
        <button class="pause-btn" id="btn-restart">ğŸ”„ Reiniciar</button>
        <button class="pause-btn" id="btn-combat-log">ğŸ“œ Log de Combate</button>
        <button class="pause-btn" id="btn-exit-to-home">ğŸšª Sair</button>
      </div>
    </div>

    <!-- Canvas 3D (para Three.js) -->
    <canvas id="three-canvas"></canvas>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>