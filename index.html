<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="RPG tÃ¡tico em Realidade Aumentada - Explore seu bairro e combata inimigos em AR">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">

  <title>D&D Pedra Branca</title>
</head>

<body>
  <!-- Container Principal -->
  <div id="app">
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen active">
      <div class="splash-content">
        <h1 class="game-title">D&D Pedra Branca</h1>
        <p class="game-subtitle">D&D Pedra Branca</p>
        <div class="loading-container">
          <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
          </div>
          <p class="loading-text" id="loading-text">Carregando...</p>
        </div>
      </div>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
      <header class="home-header">
        <h1>D&D Pedra Branca</h1>
      </header>
      <nav class="home-menu">
        <button class="menu-btn" id="btn-combat">
          <span class="btn-icon">âš”ï¸</span>
          <span class="btn-label">Combate & ExploraÃ§Ã£o</span>
        </button>
        <button class="menu-btn" id="btn-gm">
          <span class="btn-icon">ğŸ­</span>
          <span class="btn-label">Game Master</span>
        </button>
        <button class="menu-btn" id="btn-heroes">
          <span class="btn-icon">ğŸ‘¥</span>
          <span class="btn-label">HerÃ³is</span>
        </button>
        <button class="menu-btn" id="btn-inventory">
          <span class="btn-icon">ğŸ’</span>
          <span class="btn-label">InventÃ¡rio</span>
        </button>
        <button class="menu-btn" id="btn-config">
          <span class="btn-icon">âš™ï¸</span>
          <span class="btn-label">ConfiguraÃ§Ãµes</span>
        </button>
      </nav>
    </div>

    <!-- Map Screen -->
    <div id="map-screen" class="screen">
      <div id="map-container"></div>
      <button class="back-btn" id="btn-map-back">â† Voltar</button>
    </div>

    <!-- Heroes Screen -->
    <div id="heroes-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-heroes-back">â†</button>
        <h2>HerÃ³is</h2>
        <div class="resources-display">
          <span class="gold-display" id="heroes-gold">ğŸ’° 0</span>
          <span class="fragments-display" id="heroes-fragments">ğŸ’ 0</span>
        </div>
      </header>

      <!-- Grid de herÃ³is -->
      <div class="heroes-grid" id="heroes-grid"></div>

      <!-- Modal de detalhes do herÃ³i -->
      <div class="hero-detail-modal hidden" id="hero-detail-modal">
        <div class="hero-detail-content">
          <button class="modal-close" id="btn-close-hero-modal">âœ•</button>

          <!-- Header do herÃ³i -->
          <div class="hero-detail-header">
            <div class="hero-portrait-large" id="hero-portrait-large"></div>
            <div class="hero-detail-info">
              <h3 id="hero-detail-name"></h3>
              <span class="hero-detail-class" id="hero-detail-class"></span>
              <div class="hero-detail-level" id="hero-detail-level">NÃ­vel 1</div>
            </div>
          </div>

          <!-- Barra de XP -->
          <div class="xp-bar-container">
            <div class="xp-bar">
              <div class="xp-fill" id="xp-fill"></div>
            </div>
            <span class="xp-text" id="xp-text">0 / 100 XP</span>
          </div>

          <!-- Stats do herÃ³i -->
          <div class="hero-stats-grid" id="hero-stats-grid"></div>

          <!-- Equipamentos do herÃ³i -->
          <div class="equipment-section">
            <h4 class="equipment-title">âš”ï¸ Equipamentos</h4>
            <div class="equipment-grid" id="equipment-grid">
              <!-- Equipamentos serÃ£o injetados via JS -->
            </div>
          </div>

          <!-- Deck de cartas -->
          <div class="deck-section">
            <h4 class="deck-title">ğŸ“œ Deck de Cartas</h4>
            <div class="deck-grid" id="deck-grid"></div>
          </div>
        </div>
      </div>

      <!-- Modal de upgrade de carta -->
      <div class="card-upgrade-modal hidden" id="card-upgrade-modal">
        <div class="card-upgrade-content">
          <button class="modal-close" id="btn-close-upgrade-modal">âœ•</button>
          <h4 class="upgrade-title">â¬†ï¸ Upgrade de Carta</h4>

          <div class="upgrade-comparison">
            <div class="upgrade-card current">
              <span class="upgrade-card-icon" id="upgrade-card-icon"></span>
              <span class="upgrade-card-name" id="upgrade-card-name"></span>
              <span class="upgrade-card-level" id="upgrade-card-level">NÃ­vel 1</span>
              <div class="upgrade-card-stats" id="upgrade-current-stats"></div>
            </div>
            <div class="upgrade-arrow">â¡ï¸</div>
            <div class="upgrade-card next">
              <span class="upgrade-card-icon" id="upgrade-next-icon"></span>
              <span class="upgrade-card-name" id="upgrade-next-name"></span>
              <span class="upgrade-card-level" id="upgrade-next-level">NÃ­vel 2</span>
              <div class="upgrade-card-stats" id="upgrade-next-stats"></div>
            </div>
          </div>

          <div class="upgrade-cost" id="upgrade-cost">
            <span>ğŸ’° 500</span>
            <span>ğŸ’ 10</span>
          </div>

          <button class="upgrade-btn" id="btn-confirm-upgrade">â¬†ï¸ Melhorar Carta</button>
        </div>
      </div>
    </div>

    <!-- Inventory Screen -->
    <div id="inventory-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-inventory-back">â†</button>
        <h2>InventÃ¡rio</h2>
        <div class="gold-display" id="gold-display">ğŸ’° 0</div>
      </header>

      <!-- TÃ­tulo indicando que sÃ£o itens do jogador -->
      <div class="inventory-section-title">
        <span class="section-icon">ğŸ’</span>
        <span class="section-label">Seus Itens</span>
      </div>

      <!-- Filtros de categoria -->
      <div class="inventory-filters" id="inventory-filters">
        <button class="filter-tab active" data-filter="all">Todos</button>
        <button class="filter-tab" data-filter="weapon">âš”ï¸ Armas</button>
        <button class="filter-tab" data-filter="armor">ğŸ›¡ï¸ Armaduras</button>
        <button class="filter-tab" data-filter="consumable">ğŸ§ª ConsumÃ­veis</button>
        <button class="filter-tab" data-filter="quest">ğŸ“œ Quest</button>
      </div>

      <!-- Indicador de capacidade -->
      <div class="inventory-capacity" id="inventory-capacity">
        <span class="capacity-label">Mochila:</span>
        <div class="capacity-bar">
          <div class="capacity-fill" id="capacity-fill"></div>
        </div>
        <span class="capacity-text" id="capacity-text">0/20</span>
      </div>

      <!-- Grid de itens -->
      <div class="inventory-grid" id="inventory-grid"></div>

      <!-- Modal de detalhes do item -->
      <div class="item-detail-modal hidden" id="item-detail-modal">
        <div class="item-detail-content">
          <button class="modal-close" id="btn-close-item-modal">âœ•</button>
          <div class="item-detail-header">
            <span class="item-detail-icon" id="item-detail-icon"></span>
            <div class="item-detail-title">
              <h3 id="item-detail-name"></h3>
              <span class="item-detail-rarity" id="item-detail-rarity"></span>
            </div>
          </div>
          <p class="item-detail-description" id="item-detail-description"></p>
          <div class="item-detail-stats" id="item-detail-stats"></div>

          <!-- Seletor de HerÃ³i para Equipar -->
          <div class="hero-selector hidden" id="hero-selector">
            <h4 class="hero-selector-title">ğŸ‘¤ Equipar em:</h4>
            <div class="hero-selector-list" id="hero-selector-list">
              <!-- HerÃ³is serÃ£o injetados via JS -->
            </div>
          </div>

          <div class="item-detail-actions">
            <button class="action-btn equip-btn" id="btn-equip-item">ğŸ¯ Equipar</button>
            <button class="action-btn use-btn" id="btn-use-item">âœ¨ Usar</button>
            <button class="action-btn discard-btn" id="btn-discard-item">ğŸ—‘ï¸ Descartar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Config Screen -->
    <div id="config-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-config-back">â†</button>
        <h2>ConfiguraÃ§Ãµes</h2>
      </header>
      <div class="config-options">
        <label class="config-toggle">
          <span>Modo Teste (sem GPS)</span>
          <input type="checkbox" id="toggle-test-mode">
        </label>
        <label class="config-toggle">
          <span>Efeitos Sonoros</span>
          <input type="checkbox" id="toggle-sound" checked>
        </label>
      </div>
    </div>

    <!-- Game Master Screen -->
    <div id="gm-screen" class="screen">
      <header class="screen-header">
        <button class="back-btn" id="btn-gm-back">â†</button>
        <h2>Mestre do Jogo</h2>
      </header>

      <!-- Abas de navegaÃ§Ã£o -->
      <div class="gm-tabs" id="gm-tabs">
        <button class="gm-tab active" data-tab="quests">ğŸ“œ MissÃµes</button>
        <button class="gm-tab" data-tab="rumors">ğŸ² Eventos</button>
        <button class="gm-tab" data-tab="log">ğŸ“– Log</button>
      </div>

      <!-- ConteÃºdo das abas -->
      <div class="gm-content">
        <!-- Aba de MissÃµes -->
        <div class="gm-tab-content active" id="gm-quests">
          <!-- Filtros de tipo de quest -->
          <div class="quest-filters" id="quest-filters">
            <button class="quest-filter active" data-filter="active">Ativas</button>
            <button class="quest-filter" data-filter="available">DisponÃ­veis</button>
            <button class="quest-filter" data-filter="completed">ConcluÃ­das</button>
          </div>

          <!-- Lista de quests -->
          <div class="quest-list" id="quest-list"></div>
        </div>

        <!-- Aba de Eventos -->
        <div class="gm-tab-content" id="gm-rumors">
          <div class="events-panel">
            <div class="event-intro">
              <div class="gm-avatar">ğŸ­</div>
              <p class="event-intro-text">Algo acontece durante sua jornada...</p>
            </div>
            <button class="explore-btn" id="btn-explore">ğŸ—ºï¸ Explorar a RegiÃ£o</button>
          </div>
        </div>

        <!-- Aba de Log -->
        <div class="gm-tab-content" id="gm-log">
          <div class="event-log" id="event-log">
            <p class="log-empty">Nenhum evento registrado ainda.</p>
          </div>
        </div>
      </div>

      <!-- Modal de Evento de ExploraÃ§Ã£o -->
      <div class="exploration-event-modal hidden" id="exploration-event-modal">
        <div class="exploration-event-content">
          <div class="event-scroll">
            <div class="event-header">
              <span class="event-type-badge" id="event-type-badge"></span>
              <span class="event-icon" id="event-icon"></span>
              <h3 id="event-title"></h3>
            </div>

            <p class="event-narration" id="event-narration"></p>

            <div class="event-choices" id="event-choices"></div>
          </div>
        </div>
      </div>

      <!-- Modal de Resultado do Evento -->
      <div class="event-result-modal hidden" id="event-result-modal">
        <div class="event-result-content">
          <div class="result-icon" id="result-icon">âœ¨</div>
          <p class="result-text" id="result-text"></p>
          <div class="result-consequences" id="result-consequences"></div>
          <button class="continue-btn" id="btn-continue-event">Continuar</button>
        </div>
      </div>

      <!-- Modal de detalhes da quest -->
      <div class="quest-detail-modal hidden" id="quest-detail-modal">
        <div class="quest-detail-content">
          <button class="modal-close" id="btn-close-quest-modal">âœ•</button>

          <div class="quest-detail-header">
            <span class="quest-type-badge" id="quest-type-badge">â­ Principal</span>
            <h3 id="quest-detail-name"></h3>
            <span class="quest-giver" id="quest-giver"></span>
          </div>

          <p class="quest-detail-description" id="quest-detail-description"></p>

          <!-- Objetivos -->
          <div class="quest-objectives">
            <h4>ğŸ“‹ Objetivos</h4>
            <div class="objectives-list" id="objectives-list"></div>
          </div>

          <!-- Progresso -->
          <div class="quest-progress-bar">
            <div class="quest-progress-fill" id="quest-progress-fill"></div>
          </div>
          <span class="quest-progress-text" id="quest-progress-text">0%</span>

          <!-- Recompensas -->
          <div class="quest-rewards">
            <h4>ğŸ Recompensas</h4>
            <div class="rewards-grid" id="rewards-grid"></div>
          </div>

          <!-- AÃ§Ãµes -->
          <div class="quest-actions" id="quest-actions">
            <button class="action-btn accept-btn" id="btn-accept-quest">âœ… Aceitar MissÃ£o</button>
            <button class="action-btn abandon-btn hidden" id="btn-abandon-quest">âŒ Abandonar</button>
            <button class="action-btn complete-btn hidden" id="btn-complete-quest">ğŸ† Completar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Combat HUD (DOM Overlay para AR) -->
    <div id="combat-hud" class="screen">
      <!-- Menu superior -->
      <div class="combat-top-bar">
        <button class="hud-btn" id="btn-pause">â‰¡</button>
        <div class="turn-indicator" id="turn-indicator">Turno: Guerreiro</div>
      </div>

      <!-- Painel de herÃ³is (esquerda) + botÃ£o passar turno -->
      <div class="hero-sidebar">
        <div class="hero-panel" id="hero-panel"></div>
        <button class="pass-turn-btn" id="btn-pass-turn">â­ï¸ Passar</button>
      </div>

      <!-- Carrossel de cartas (inferior) -->
      <div class="card-carousel" id="card-carousel"></div>

      <!-- Reticle indicator -->
      <div class="reticle-hint" id="reticle-hint">Aponte para uma superfÃ­cie plana</div>

      <!-- Pause Menu -->
      <div class="pause-menu hidden" id="pause-menu">
        <h3>â¸ï¸ Pausado</h3>
        <button class="pause-btn" id="btn-resume">â–¶ï¸ Continuar</button>
        <button class="pause-btn" id="btn-restart">ğŸ”„ Reiniciar</button>
        <button class="pause-btn" id="btn-combat-log">ğŸ“œ Log de Combate</button>
        <button class="pause-btn" id="btn-exit-to-home">ğŸšª Sair</button>
      </div>
    </div>

    <!-- Dialogue Overlay -->
    <div id="dialogue-overlay" class="dialogue-overlay hidden">
      <div class="dialogue-box">
        <h3 class="dialogue-speaker" id="dialogue-speaker">Speaker Name</h3>
        <p class="dialogue-text" id="dialogue-text">Dialogue text goes here...</p>
        <div class="dialogue-options" id="dialogue-options">
          <!-- Buttons injected via JS -->
        </div>
      </div>
    </div>

    <!-- Shop Overlay -->
    <div id="shop-overlay" class="shop-overlay hidden">
      <div class="shop-container">
        <header class="shop-header">
          <h3 id="shop-name">Loja</h3>
          <button class="close-btn" id="btn-close-shop">âœ•</button>
        </header>

        <div class="shop-content">
          <div class="shop-grid" id="shop-items-grid">
            <!-- Items injected via JS -->
          </div>
        </div>

        <footer class="shop-footer">
          <span class="player-gold" id="shop-player-gold">ğŸ’° 0</span>
        </footer>
      </div>
    </div>
  </div>

  <!-- Canvas 3D (para Three.js) -->
  <canvas id="three-canvas"></canvas>

  <script type="module" src="/src/main.js"></script>
</body>

</html>